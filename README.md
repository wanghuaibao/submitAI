# Submit项目

这是一个基于Python的Web项目，用于处理提交功能。

## 项目结构

- `app/`: 应用程序主要代码
- `logs/`: 存储日志文件
- `submissions/`: 存储提交的内容
- `uploads/`: 上传文件存储
- `tools/`: 工具函数库
- `venv/`: Python虚拟环境

## 安装指南

1. 克隆仓库：
```bash
git clone https://github.com/yourusername/submit.git
cd submit
```

2. 创建并激活虚拟环境：
```bash
python -m venv venv
source venv/bin/activate  # 在Windows上使用 venv\Scripts\activate
```

3. 安装依赖：
```bash
pip install -r requirements.txt
```

## 使用方法

运行应用程序：
```bash
python app.py
```

## 贡献指南

如果你想为这个项目做贡献，请先创建一个issue讨论你想要改变的内容。

# 自动化产品提交工具

这是一个用于自动将AI工具提交到各种目录网站的Web应用程序。该工具可以帮助您节省时间，将产品信息自动提交到多个AI工具目录，增加曝光度和流量。现已集成OpenAI接口，支持智能优化提交内容和自动填写表单。

## 项目功能

- 通过Web界面填写产品信息并上传产品相关图片
- 利用AI优化提交内容，增加审核通过率
- 使用Playwright实现真实浏览器自动化填写表单和提交
- 自动检测表单结构并智能映射字段
- 自动将产品信息提交到多个AI工具目录网站
- 跟踪提交状态和结果，包括截图记录
- 在后台处理提交，并更新状态信息

## 支持的目录网站

目前支持以下AI工具目录网站:

1. [NeilPatel AI Tools](https://aitools.neilpatel.com/submit/)
2. [AI Tools List](https://aitoolslist.io/submit-ai-tool/)

## 安装指南

### 前提条件

- Python 3.8+ 
- pip包管理器

### 安装步骤

1. 克隆项目并进入项目目录

```bash
git clone <仓库地址>
cd submit
```

2. 安装依赖

```bash
pip install -r requirements.txt
```

3. 安装Playwright浏览器

```bash
playwright install chromium
```

4. 配置环境变量

创建一个`.env`文件，并添加以下内容：

```
# OpenAI API密钥 - 用于AI辅助提交（注意：系统会将此环境变量用作OpenAI API密钥）
GROK_API_KEY=your-openai-api-key-here

# 设置为true开启调试模式
DEBUG=false

# 浏览器配置
HEADLESS=true  # 设置为false可以看到浏览器界面
```

## 启动应用

项目有两种启动方式，请使用以下**推荐方式**启动：

### 方式一：使用脚本启动（推荐）

最简单的方式是使用提供的启动脚本：

```bash
# Linux/macOS
sh start.sh

# Windows
start.bat
```

应用将在 http://localhost:8000 启动。

### 方式二：直接启动

如果需要手动启动，请使用以下命令：

```bash
# 激活虚拟环境（如果有）
source venv/bin/activate  # Linux/macOS
# 或
.\venv\Scripts\activate   # Windows

# 启动应用
python simple_app.py
```

应用将在 http://localhost:8001 启动。

> **重要说明**：请避免同时使用多种方式或在多个端口启动应用，这可能导致资源冲突。如果发现端口冲突，请先关闭之前的进程。

## 端口使用说明

- **8000**：默认端口，通过 `start.sh` 脚本或 `app.py` 启动
- **8001**：通过 `simple_app.py` 直接启动时使用

## 常见问题

### 端口被占用

如果启动时提示端口被占用，可以使用以下命令查找并关闭占用端口的进程：

```bash
# 查找占用端口的进程
lsof -i :8000  # 或 8001

# 终止进程
kill -9 <进程ID>
```

### 浏览器自动化问题

如果提交过程中遇到浏览器崩溃或表单填写失败，可尝试：

1. 设置 `HEADLESS=false` 查看浏览器操作过程
2. 检查网络连接和代理设置
3. 确保目标网站可以正常访问

## 使用指南

1. 访问首页，点击"创建新提交"按钮
2. 填写表单，包括产品名称、URL、描述等信息，并上传产品Logo
3. 选择目标目录网站，然后提交表单
4. 提交后，您将看到提交列表页面，可以查看所有提交的状态
5. 点击"查看"查看提交详情，并可以点击"开始提交"按钮开始处理提交

### AI辅助功能

如果配置了有效的API密钥，系统将使用AI来：

1. 优化产品描述，使其更符合目标网站的风格和要求
2. 分析目标网站的表单结构，智能匹配字段
3. 生成优化的标签和关键词
4. 提高提交成功率

## 项目结构

- `app.py`: 应用入口点（使用 app/web 下的路由）
- `simple_app.py`: 完整独立的应用（推荐使用）
- `submitAI/`: 提交处理相关功能
  - `submitter.py`: 提交处理器
  - `openai_client.py`: OpenAI API客户端
- `browser_use/`: 浏览器自动化相关功能
  - `browser/`: 浏览器相关类
  - `agent.py`: 浏览器代理
  - `controller.py`: 操作控制器
- `app/web/`: Web界面相关文件
  - `templates/`: HTML模板
  - `static/`: 静态资源

## 未来计划

- 添加更多AI工具目录支持
- 实现基于AI的表单自动填写
- 添加用户认证功能
- 支持批量提交
- 添加详细的统计和报告功能

# AI表单自动分析与填写系统增强

本次更新大幅提升了系统分析网页表单和自动填写的能力，特别适用于各类AI工具目录网站的提交场景。

## 主要增强

### 1. 智能表单字段匹配
- 扩展了字段匹配规则库，支持超过200个常见字段映射
- 增加部分匹配能力，通过字段名包含关系进行模糊匹配
- 针对特殊字段类型(文件上传、选择框、日期字段等)的专门处理

### 2. 表单检测与分析
- 增强表单选择器识别能力，支持各类常见表单标签和属性
- 智能分析表单结构，处理隐藏字段、必填字段等
- 支持通过JavaScript评估表单内容和字段信息
- 增加iframe内表单的检测和处理能力

### 3. 网站特定处理
- 针对超过15个常见AI工具目录网站的特殊处理
- 通用网站处理流程优化，包括弹窗处理、页面滚动等
- 自动识别和处理"提交工具"链接和按钮
- 自动处理条款同意复选框

### 4. 验证码处理
- 支持多种类型验证码的识别和处理尝试:
  - Google reCAPTCHA (v2/v3)
  - Cloudflare Turnstile
  - hCaptcha
  - 一般图片验证码

### 5. AI提示词优化
- 重写AI分析表单的提示词，提供更精确的字段映射
- 增强表单填写指令生成，包含详细步骤和异常处理
- 针对特定网站定制提交内容生成，提高接受率

## 示例场景

系统现在能够处理以下复杂场景:

1. **多步骤表单** - 自动处理分页或多步流程的表单
2. **iframe嵌套表单** - 检测并与嵌套在iframe中的表单交互
3. **动态加载字段** - 通过页面滚动和交互触发动态字段加载
4. **特殊输入组件** - 处理自定义下拉框、标签输入、范围滑块等
5. **各类验证机制** - 尝试自动处理各种验证码和验证流程

## 使用提示

- 提供尽可能完整的产品信息以提高匹配率
- 为特殊字段(如logo、截图)提供正确的文件路径
- 系统会自动记录详细日志，便于排查问题 